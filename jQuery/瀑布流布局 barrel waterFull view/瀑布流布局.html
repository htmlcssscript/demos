<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .content{
            width: 100%;
            position: relative;
            display: inline-block;
        }
        .item{
            position: absolute;
            width: 200px;
            margin: 5px;
            transition: all 1s;
        }
        .h1{
            height: 300px;
        }
        .h2{
            height: 400px;
        }
        .h3{
            height: 350px;
        }
        .h4{
           height: 200px;
        }
        .h5{
           height: 450px;
        }
        .h6{
           height: 500px;
        }
        .h7{
           height: 100px;
        }
        .h8{
            height: 250px;
        }
    </style>
</head>
<body> 
    <div class="content">
        <div class="item h2 add">1</div>
        <div class="item h1">2</div>
        <div class="item h2">3</div>
        <div class="item h1">4</div>
        <div class="item h4">5</div>
        <div class="item h4">6</div>
        <div class="item h5">7</div>
        <div class="item h3">8</div>
        <div class="item h8">9</div>
        <div class="item h6">10</div>
        <div class="item h4">5</div>
        <div class="item h4">6</div>
        <div class="item h5">7</div>
        <div class="item h3">8</div>
        <div class="item h8">9</div>
        <div class="item h6">10</div>
        <div class="item h5">11</div>
        <div class="item h6">12</div>
        <div class="item h2">13</div>
        <div class="item h7">14</div>
        <div class="item h8">15</div>
        <div class="item h7">16</div>
        <div class="item h1">17</div>
        <div class="item h3">18</div>
        <div class="item h8">19</div>
        <div class="item h3">20</div>
        <div class="item h1">2</div>
        <div class="item h2">3</div>
        <div class="item h1">4</div>
        <div class="item h4">5</div>
        <div class="item h4">6</div>
        <div class="item h5">7</div>
        <div class="item h3">8</div>
        <div class="item h8">9</div>
        <div class="item h6">10</div>
        <div class="item h4">5</div>
        <div class="item h4">6</div>
        <div class="item h5">7</div>
        <div class="item h3">8</div>
        <div class="item h8">9</div>
        <div class="item h6">10</div>
        <div class="item h5">11</div>
        <div class="item h6">12</div>
        <div class="item h2">13</div>
        <div class="item h7">14</div>
        <div class="item h8">15</div>
        <div class="item h7">16</div>
        <div class="item h1">17</div>
        <div class="item h3">18</div>
        <div class="item h8">19</div>
        <div class="item h3">20</div>
        <div class="item h1">2</div>
        <div class="item h2">3</div>
        <div class="item h1">4</div>
        <div class="item h4">5</div>
        <div class="item h4">6</div>
        <div class="item h5">7</div>
        <div class="item h3">8</div>
        <div class="item h8">9</div>
        <div class="item h6">10</div>
        <div class="item h4">5</div>
        <div class="item h4">6</div>
        <div class="item h5">7</div>
        <div class="item h3">8</div>
        <div class="item h8">9</div>
        <div class="item h6">10</div>
        <div class="item h5">11</div>
        <div class="item h6">12</div>
        <div class="item h2">13</div>
        <div class="item h7">14</div>
        <div class="item h8">15</div>
        <div class="item h7">16</div>
        <div class="item h1">17</div>
        <div class="item h3">18</div>
        <div class="item h8">19</div>
        <div class="item h3">20</div>
    </div>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      //计算出每列的个数

      // 创建一个数组清空

      //获取元素的宽度将其偏移，更新数组对应的值
        // waterFull()
        // $(window).on('resize',waterFull)
        // function waterFull(){
        //     console.log(1)
        //     var len = parseInt($('.content').width()/$('.add').width())
        //     var arr = []
        //     for(var i = 0; i<len;i++){
        //         arr[i]=0
        //     }
        //     $('.item').each(function(){
        //         var minValue = Math.min.apply(null, arr)//每列最小值
        //         var minIndex = arr.indexOf(minValue)//最小值对应的位置
                
        //         $(this).css({
        //             top: arr[minIndex],
        //             left: minIndex * $(this).outerWidth(true)
        //         })
        //         arr[minIndex] += $(this).outerHeight(true)
        //     })
        // }


        var waterFull = (function(){
           function init(){
            waterFull()
            $(window).on('resize',waterFull)

            function waterFull(){
                var len = parseInt($('.content').width()/$('.add').width())
                var arr = []
                for(var i = 0; i<len;i++){
                    arr[i]=0
                }
                $('.item').each(function(){
                    function compare(max,min){
                      return parseInt(Math.random() * (max-min) + min)
                    }
                    var diff1 = compare(200,50)
                    var diff2 = compare(200,50)
                    var diff3 = compare(200,50)
                    var rgba = 'rgba('+ diff1 +','+ diff2 +','+ diff3 +',.8)'
                    $(this).css({backgroundColor: rgba})
                    var minValue = Math.min.apply(null, arr)//每列最小值
                    var minIndex = arr.indexOf(minValue)//最小值对应的位置
                    
                    $(this).css({
                        top: arr[minIndex],
                        left: minIndex * $(this).outerWidth(true)
                    })
                    arr[minIndex] += $(this).outerHeight(true)
                })
            }
           }
           return {
               init:init
           }
        })()
        waterFull.init()
    </script>
</body>
</html>